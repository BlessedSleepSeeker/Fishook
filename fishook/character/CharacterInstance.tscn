[gd_scene load_steps=45 format=3 uid="uid://bcvho024kiqga"]

[ext_resource type="Script" uid="uid://dprgwt0j2p82d" path="res://character/character_instance.gd" id="1_vgy44"]
[ext_resource type="PackedScene" uid="uid://uh75ppgcvkw1" path="res://character/model/CharacterSkin.tscn" id="2_1bt4p"]
[ext_resource type="Script" uid="uid://bjl81yuriqbdh" path="res://character/state_machine/state_machine.gd" id="2_g3qjf"]
[ext_resource type="Script" uid="uid://cu44wt5468u5p" path="res://character/state_machine/states/idle.gd" id="3_gn8po"]
[ext_resource type="Script" uid="uid://limdfqv1yvnx" path="res://character/state_machine/states/walk.gd" id="5_svu25"]
[ext_resource type="Script" uid="uid://2yki1u1wwicx" path="res://character/state_machine/states/double_jump.gd" id="6_7jo2n"]
[ext_resource type="Script" uid="uid://dlvacdf1noi48" path="res://character/state_machine/states/jump.gd" id="6_j4qiq"]
[ext_resource type="Script" uid="uid://dba7awsrs6b6y" path="res://character/character_physics.gd" id="6_uip3n"]
[ext_resource type="Script" uid="uid://ctp11t6lc7heo" path="res://character/state_machine/states/hook_throw.gd" id="7_1bt4p"]
[ext_resource type="Script" uid="uid://pdypd0ws2yoi" path="res://character/state_machine/states/fall.gd" id="7_185dw"]
[ext_resource type="Script" uid="uid://uvu23qv3p1kq" path="res://character/state_machine/states/hook_activated.gd" id="8_7jo2n"]
[ext_resource type="PackedScene" uid="uid://dfvrcp5lrv2hw" path="res://camera/MouseFollowCamera.tscn" id="11_7jo2n"]
[ext_resource type="Script" uid="uid://bria1y7ivp7ag" path="res://character/particles_manager.gd" id="13_0y2cd"]

[sub_resource type="Resource" id="Resource_0y2cd"]
script = ExtResource("6_uip3n")
GRAVITY = -30.0
JUMP_IMPULSE = 12.0
ACCELERATION = 10.0
MAX_SPEED = 10.0
FRICTION = 10.0
ROTATION_SPEED = 12.0
GRAPPLE_MAX_RANGE = 30.0
GRAPPLE_REST_LENGTH = 2.0
GRAPPLE_SWING_SPEED = 70.0
GRAPPLE_PULLING_SPEED = 10.0
metadata/_custom_type_script = "uid://dba7awsrs6b6y"

[sub_resource type="Resource" id="Resource_uip3n"]
script = ExtResource("6_uip3n")
GRAVITY = -30.0
JUMP_IMPULSE = 15.0
ACCELERATION = 5.0
MAX_SPEED = 12.0
FRICTION = 5.0
ROTATION_SPEED = 12.0
GRAPPLE_MAX_RANGE = 30.0
GRAPPLE_REST_LENGTH = 2.0
GRAPPLE_SWING_SPEED = 70.0
GRAPPLE_PULLING_SPEED = 10.0
metadata/_custom_type_script = "uid://dba7awsrs6b6y"

[sub_resource type="Resource" id="Resource_uh5tv"]
script = ExtResource("6_uip3n")
GRAVITY = -30.0
JUMP_IMPULSE = 12.0
ACCELERATION = 20.0
MAX_SPEED = 8.0
FRICTION = 40.0
ROTATION_SPEED = 12.0
GRAPPLE_MAX_RANGE = 30.0
GRAPPLE_REST_LENGTH = 2.0
GRAPPLE_SWING_SPEED = 70.0
GRAPPLE_PULLING_SPEED = 10.0
metadata/_custom_type_script = "uid://dba7awsrs6b6y"

[sub_resource type="Resource" id="Resource_3in86"]
script = ExtResource("6_uip3n")
GRAVITY = -30.0
JUMP_IMPULSE = 12.0
ACCELERATION = 5.0
MAX_SPEED = 8.0
FRICTION = 5.0
ROTATION_SPEED = 12.0
GRAPPLE_MAX_RANGE = 30.0
GRAPPLE_REST_LENGTH = 2.0
GRAPPLE_SWING_SPEED = 70.0
GRAPPLE_PULLING_SPEED = 50.0
metadata/_custom_type_script = "uid://dba7awsrs6b6y"

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_7jo2n"]
radius = 0.3
height = 1.7

[sub_resource type="Curve" id="Curve_uip3n"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.5, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_0y2cd"]
curve = SubResource("Curve_uip3n")

[sub_resource type="Gradient" id="Gradient_uh5tv"]
colors = PackedColorArray(0.54, 1, 0.655, 1, 1, 1, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_3in86"]
gradient = SubResource("Gradient_uh5tv")

[sub_resource type="Gradient" id="Gradient_66hhr"]
interpolation_mode = 2
offsets = PackedFloat32Array(0, 0.145455, 0.827273, 1)
colors = PackedColorArray(0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_wtdxw"]
gradient = SubResource("Gradient_66hhr")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_6r8ug"]
spread = 180.0
flatness = 1.0
initial_velocity_min = 0.5
initial_velocity_max = 0.5
gravity = Vector3(0, 0, 0)
linear_accel_min = -2.23517e-06
linear_accel_max = -2.23517e-06
radial_accel_min = -2.23517e-06
radial_accel_max = -2.23517e-06
tangential_accel_min = -5.0
tangential_accel_max = 5.0
color_ramp = SubResource("GradientTexture1D_wtdxw")
color_initial_ramp = SubResource("GradientTexture1D_3in86")
alpha_curve = SubResource("CurveTexture_0y2cd")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_iw8v4"]
transparency = 1
vertex_color_use_as_albedo = true

[sub_resource type="SphereMesh" id="SphereMesh_k5qqw"]
material = SubResource("StandardMaterial3D_iw8v4")
radius = 0.1
height = 0.2
radial_segments = 6
rings = 6

[sub_resource type="Curve" id="Curve_0y2cd"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.5, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_uh5tv"]
curve = SubResource("Curve_0y2cd")

[sub_resource type="Gradient" id="Gradient_3in86"]
colors = PackedColorArray(0.54, 0.915667, 1, 1, 1, 1, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_66hhr"]
gradient = SubResource("Gradient_3in86")

[sub_resource type="Gradient" id="Gradient_wtdxw"]
interpolation_mode = 2
offsets = PackedFloat32Array(0, 0.145455, 0.827273, 1)
colors = PackedColorArray(0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_6r8ug"]
gradient = SubResource("Gradient_wtdxw")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_iw8v4"]
spread = 180.0
flatness = 1.0
initial_velocity_min = 1.0
initial_velocity_max = 2.0
gravity = Vector3(0, 0, 0)
linear_accel_min = -1.0
linear_accel_max = -2.23517e-06
tangential_accel_min = 5.0
tangential_accel_max = 5.0
scale_max = 2.0
color_ramp = SubResource("GradientTexture1D_6r8ug")
color_initial_ramp = SubResource("GradientTexture1D_66hhr")
alpha_curve = SubResource("CurveTexture_uh5tv")

[sub_resource type="Curve" id="Curve_uh5tv"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.1, 1), 0.0, 0.0, 0, 0, Vector2(0.9, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 4
metadata/_snap_enabled = true

[sub_resource type="CurveTexture" id="CurveTexture_3in86"]
curve = SubResource("Curve_uh5tv")

[sub_resource type="Gradient" id="Gradient_6r8ug"]
offsets = PackedFloat32Array(0, 0.317708, 0.677083, 1)
colors = PackedColorArray(1, 0, 0, 1, 0.55, 1, 0, 1, 0.00789999, 0.50323, 0.79, 1, 1, 0, 0.0166664, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_iw8v4"]
gradient = SubResource("Gradient_6r8ug")

[sub_resource type="Gradient" id="Gradient_0y2cd"]
offsets = PackedFloat32Array(0, 0.2, 0.4, 0.6, 0.8, 1)
colors = PackedColorArray(1, 0.5, 0.5, 1, 0.75, 0.6, 0.375, 1, 0.6272, 0.7, 0.336, 1, 0.527, 0.85, 0.6885, 1, 0.4985, 0.704167, 0.84425, 1, 0.47, 0.558333, 1, 1)
metadata/_snap_enabled = true

[sub_resource type="GradientTexture1D" id="GradientTexture1D_uh5tv"]
gradient = SubResource("Gradient_0y2cd")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_k5qqw"]
gravity = Vector3(0, -1, 0)
color_ramp = SubResource("GradientTexture1D_uh5tv")
color_initial_ramp = SubResource("GradientTexture1D_iw8v4")
alpha_curve = SubResource("CurveTexture_3in86")

[sub_resource type="Curve" id="Curve_6l8pn"]
_data = [Vector2(0, 0.503396), 0.0, 0.0, 0, 0, Vector2(0.196, 1), -3.2929, -3.2929, 0, 0, Vector2(1, 0.0619694), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_hph2m"]
transparency = 1
vertex_color_use_as_albedo = true

[sub_resource type="RibbonTrailMesh" id="RibbonTrailMesh_gkbvb"]
material = SubResource("StandardMaterial3D_hph2m")
curve = SubResource("Curve_6l8pn")

[node name="CharacterInstance" type="CharacterBody3D"]
collision_mask = 62
script = ExtResource("1_vgy44")

[node name="StateMachine" type="Node" parent="."]
script = ExtResource("2_g3qjf")
initial_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine"]
script = ExtResource("3_gn8po")
fidget_chance = 0

[node name="Walk" type="Node" parent="StateMachine"]
script = ExtResource("5_svu25")

[node name="Jump" type="Node" parent="StateMachine"]
script = ExtResource("6_j4qiq")
physics_parameters = SubResource("Resource_0y2cd")

[node name="DoubleJump" type="Node" parent="StateMachine"]
script = ExtResource("6_7jo2n")
physics_parameters = SubResource("Resource_uip3n")

[node name="Fall" type="Node" parent="StateMachine"]
script = ExtResource("7_185dw")

[node name="HookThrow" type="Node" parent="StateMachine"]
script = ExtResource("7_1bt4p")
physics_parameters = SubResource("Resource_uh5tv")

[node name="HookActivated" type="Node" parent="StateMachine"]
script = ExtResource("8_7jo2n")
physics_parameters = SubResource("Resource_3in86")

[node name="Hitbox" type="CollisionShape3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.85, 0)
shape = SubResource("CapsuleShape3D_7jo2n")

[node name="CharacterSkin" parent="." instance=ExtResource("2_1bt4p")]
unique_name_in_owner = true

[node name="MouseFollowCamera" parent="." instance=ExtResource("11_7jo2n")]
transform = Transform3D(1, 0, 0, 0, 0.965926, -0.258819, 0, 0.258819, 0.965926, 0, 1.65, 0)

[node name="ParticlesManager" type="Node3D" parent="."]
unique_name_in_owner = true
script = ExtResource("13_0y2cd")

[node name="SmokeCloudDJ" type="GPUParticles3D" parent="ParticlesManager"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
emitting = false
amount = 50
lifetime = 0.8
one_shot = true
explosiveness = 1.0
process_material = SubResource("ParticleProcessMaterial_6r8ug")
draw_pass_1 = SubResource("SphereMesh_k5qqw")

[node name="SmokeCloudLanding" type="GPUParticles3D" parent="ParticlesManager"]
emitting = false
amount = 100
lifetime = 0.8
one_shot = true
explosiveness = 1.0
process_material = SubResource("ParticleProcessMaterial_iw8v4")
draw_pass_1 = SubResource("SphereMesh_k5qqw")

[node name="HookTrail" type="GPUParticles3D" parent="ParticlesManager"]
transform = Transform3D(1.91069e-15, -4.37114e-08, -1, -1, -4.37114e-08, 0, -4.37114e-08, 1, -4.37114e-08, 0, 0, 0)
amount = 10
process_material = SubResource("ParticleProcessMaterial_k5qqw")
draw_pass_1 = SubResource("RibbonTrailMesh_gkbvb")

[editable path="MouseFollowCamera"]
